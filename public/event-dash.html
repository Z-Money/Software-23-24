<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>General Dashboard | Chapter Connect</title>
        <link rel="manifest" href="manifest.json">

        <!-- Icons -->
        <link rel="icon" type="images/favicon" href="images/logo.png">
        <link rel="apple-touch-icon" sizes="180x180" href="images/logo.png">
        <link rel="apple-touch-startup-image" href="images/logo.png">

        <!-- CSS -->
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <link href="dropdown.css" rel="stylesheet">
        <link href="popup.css" rel="stylesheet">
        <link href="task.css" rel="stylesheet">
        <link href="confirm.css" rel="stylesheet">
        <link href="multi-select.css" rel="stylesheet">


        <style>
            @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap");

            *,
            *::before,
            *::after {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                padding: 0;
                background-color: #122b52;
                height: 100vh;
                width: 100vw;
                font-family: 'Poppins', sans-serif;
            }

            .tiles {
                border-radius: .5em;
                height: 98%;
                width: 98%;
                padding: 1%;
                box-shadow: 0 12px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                display: flex;
                background-color: #fff;
                flex-direction: column;
                align-items: center;
                flex: 1;
            }

            .tiles img {
                height: 100%;
                max-width: 100%;
                display: block;
            }

            #dash {
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                height: 100vh;
                max-height: 100vh;
                width: 100vw;
                max-width: 100vw;
                margin: auto;
                padding: 1%;
                box-sizing: border-box;
                font-family: 'Poppins', sans-serif;
            }

            .dash-container-box {
                display: flex;
                height: 85%;
                max-height: 85%;
                width: 100%;
                flex: 1;
                flex-direction: column;
            }

            .dash-container {
                width: 100%;
                height: 47.5%;
                max-height: 47.5%;
                display: flex;
                flex-direction: row;
                justify-content: space-between;
            }

            .profile-row {
                display: flex;
                flex-direction: row;
                justify-content: space-around;
                width: 100%;
                height: 10%;
                min-height: 10%;
                padding: 0;
                margin: 0;
            }

            #event-name {
                color: #fff;
                font-family: "Poppins", sans-serif;
                font-size: 2em;
                display: flex;
                align-items: center;
            }

            #event-name i {
                vertical-align: middle;
                font-size: 1.2em;
                cursor: pointer;
            }

            .sections {
                width: auto;
                display: flex;
                flex-direction: column;
                align-items: center;
                overflow: hidden;
            }

            #completion {
                /* background-color: #4CAF50; */
                width: 22.5%;
            }

            #task-board {
                /* background-color: #2196F3; */
                width: 36.25%;
            }

            #calendar {
                /* background-color: #555; */
                width: 36.25%;
            }

            #member-list {
                /* background-color: #f44336; */
                width: 48.75%;
            }

            #comments {
                /* background-color: #008CBA; */
                width: 48.75%;
            }

            .circular-progress {
                position: relative;
                /* height: 100%;
                width: auto; */
                height: 100%;
                width: auto;
                aspect-ratio: 1 / 1;
                border-radius: 50%;
                background: conic-gradient(#2a3de8 3.6deg, #aaa 0deg);
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .circular-progress::before {
                content: "";
                position: absolute;
                height: 84%;
                width: 84%;
                border-radius: 50%;
                background-color: #fff;
            }

            .progress-value {
                position: relative;
                font-size: 40px;
                font-weight: 600;
                color: #2a3de8;
            }

            @media screen and (max-width: 1024px) {
                .circular-progress {
                    height: auto;
                    width: 100%;
                }
            }

            .title {
                text-align: center;
                font-weight: 700;
                color: #fff;
                margin: 10px auto;
                padding: 0;
                width: 100%;
                font-size: 1.5em;
            }

            .member-list {
                background-color: #fff;
                border-radius: 1em;
                width: 98%;
                flex: 1;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
                overflow-y: auto;
                padding: 2%;
            }

            .member {
                display: flex;
                flex-direction: column;
                /* justify-content: center; */
                width: 100%;
                padding: 1em;
                background-color: #fff;
                border-radius: 1em;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
                margin-bottom: 1em;
                box-sizing: border-box;
            }

            .teammate-name {
                margin: 0;
                font-size: 1.2em;
                /* text-align: center; */
                width: 100%;
            }

            .teammate-year {
                font-weight: 400;
            }

            .member-email {
                margin: 0;
                padding: 5px 0px 0px 0px;
            }

            .freshman {
                color: #4CAF50;
            }

            .sophomore {
                color: #FF9800;
            }

            .junior {
                color: #2196F3;
            }

            .senior {
                color: #9C27B0;
            }

            .member-tags-row {
                display: flex;
                justify-content: flex-start;
                gap: 0em 1em;
                /* Add more space between the tags */
                width: 100%;
                margin-top: 0.5em;
                box-sizing: border-box;
                flex-wrap: wrap;
            }

            .teammate-event {
                border-radius: 1em;
                color: #000;
                padding: 0.3em 0.6em;
                white-space: nowrap;
                font-size: 0.9em;
                text-align: center;
                flex: none;
                margin-top: 0;
            }

            .sticky {
                position: sticky;
                top: 0;
                z-index: 1;
                padding: 1em;
                height: min-content;
                background-color: #122b52;
                padding: 0;
            }

            .member-list::-webkit-scrollbar {
                width: 10px;
                height: 5px;
                background-color: transparent;
                display: block;
            }

            .member-list::-webkit-scrollbar-thumb {
                background-color: #00a5d3;
                border-radius: 1em;
            }

            @-moz-document url-prefix() {
                .member-list {
                    scrollbar-width: thin;
                    scrollbar-color: #00a5d3 transparent;
                }
            }

            div.task-board {
                width: 95%;
            }

            #chat-frame {
                width: 100%;
                height: 100%;
                border-radius: .5em;
                border: 0;
            }

            #chat {
                width: 95%;
                height: 98%;
                border-radius: .5em;
            }

            #calendar-frame {
                border-radius: .5em;
                height: 98%;
                width: 95%;
            }
        </style>
    </head>

</html>

<body>
    <div id="dash">
        <div class="profile-row">
            <h1 id="event-name"><i class='bx bx-log-out'></i>&nbsp;Event</h1>
            <div class="profile-box">
                <div class="select-menu">
                    <div class="select-btn">
                        <span class="sBtn-text">Name</span>
                        <i class="bx bx-chevron-down"></i>
                    </div>

                    <ul class="options">
                        <li class="option">
                            <i class="bx bx-user"></i>
                            <span class="option-text">Profile</span>
                        </li>
                        <li class="option">
                            <i class="bx bx-log-out"></i>
                            <span class="option-text">Logout</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="dash-container-box">
            <div class="dash-container">
                <div class="sections" id="completion">
                    <h1 class="title">Completion</h1>
                    <div class="tiles" style="width: auto">
                        <!-- <img src="./images/completion.png" alt=""> -->
                        <div class="circular-progress">
                            <span class="progress-value">0%</span>
                        </div>
                    </div>
                </div>
                <div class="sections" id="task-board">
                    <h1 class="title">Task Board</h1>
                    <div class="task-board">
                        <div class="task-column incomplete">
                            <h3 class="column-title">Incomplete</h3>
                            <div class="add-card">
                                <p><i class='bx bx-plus'></i>Add new task</p>
                            </div>
                            <br>
                        </div>
                        <div class="task-column progress">
                            <h3 class="column-title">In Progress</h3>

                            <div class="add-card">
                                <p><i class='bx bx-plus'></i>Add new task</p>
                            </div>
                            <br>
                        </div>
                        <div class="task-column complete">
                            <h3 class="column-title">Complete</h3>

                            <div class="add-card">
                                <p><i class='bx bx-plus'></i>Add new task</p>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
                <div class="sections" id="calendar">
                    <h1 class="title">Calendar&nbsp;<i class='bx bx-expand-alt' onclick="togglePopup(3)"></i></h1>
                    <iframe frameborder="0" src="https://calendar.online/86c0e897482639553ea8?iframe=true"
                        id="calendar-frame"></iframe>
                </div>
            </div>

            <br>

            <div class="dash-container">
                <div class="sections" id="member-list">
                    <h1 class="title sticky">Team Members</h1>
                    <div class="member-list">
                        <div class="member">
                            <h3 class="teammate-name">Name</h3>
                            <p class="member-email"></p>
                        </div>
                        <div class="member">
                            <h3 class="teammate-name">Name</h3>
                            <p class="member-email"></p>
                        </div>
                        <div class="member">
                            <h3 class="teammate-name">Name</h3>
                            <p class="member-email"></p>
                        </div>
                        <div class="member">
                            <h3 class="teammate-name">Name</h3>
                            <p class="member-email"></p>
                        </div>
                        <div class="member">
                            <h3 class="teammate-name">Name</h3>
                            <p class="member-email"></p>
                        </div>
                    </div>
                </div>

                <div class="sections" id="comments">
                    <h1 class="title">Discussion&nbsp;<i class='bx bx-expand-alt' onclick="togglePopup(4)"></i></h1>
                    <div id="chat"></div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- Profile Popup -->
    <div class="popup-overlay">
        <div class="popup" id="profile-popup">
            <span class="popup-close"><i class='bx bx-x'></i></span>
            <div class="profile-container">
                <div class="profile-header">
                    <h1><i class='bx bx-user-circle'></i> Profile</h1>
                </div>
                <div class="profile-info">
                    <div class="info-item">
                        <label><i class='bx bx-user'></i> Name:</label>
                        <span id="name">John Doe</span>
                    </div>
                    <div class="info-item">
                        <label><i class='bx bx-user-pin'></i> Username:</label>
                        <span id="username">johndoe123</span>
                    </div>
                    <div class="info-item">
                        <label><i class='bx bx-envelope'></i> Email:</label>
                        <span id="email">johndoe@gmail.com</span>
                    </div>
                    <div class="info-item">
                        <label><i class='bx bx-calendar'></i> Year:</label>
                        <span id="year">Senior</span>
                    </div>
                    <div class="info-item">
                        <label><i class='bx bx-trophy'></i> Events:</label>
                        <ul id="events">
                            <li class="event">Event 1</li>
                            <li class="event">Event 2</li>
                            <li class="event">Event 3</li>
                            <li class="event">Event 4</li>
                        </ul>
                    </div>
                    <div class="info-item">
                        <label><i class='bx bx-world'></i> Conferences<br>Attended:</label>
                        <ul id="conferences">
                            <li class="thing">Conference 1</li>
                            <li class="thing">Conference 2</li>
                            <li class="thing">Conference 3</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Edit Task Popup -->
    <div class="popup-overlay">
        <div class="popup">
            <span class="popup-close"><i class='bx bx-x'></i></span>
            <div class="profile-container">
                <div class="profile-header">
                    <h1><i class='bx bx-edit'></i>&nbsp;Edit Task</h1>
                </div>
                <div class="profile-info">
                    <div class="info-item">
                        <label for="edit-task-name"><i class='bx bx-task'></i> Task Name:</label>
                        <input type="text" id="edit-task-name" class="task-input">
                    </div>
                    <!-- <div class="info-item">
                        <label for="edit-event"><i class='bx bx-calendar-event'></i> Event:</label>
                        <select id="edit-event" class="task-input">
                            <option value="CAD Engineering">CAD Engineering</option>
                            <option value="Chapter Team">Chapter Team</option>
                            <option value="Coding">Coding</option>
                            <option value="Dragster Design">Dragster Design</option>
                            <option value="Engineering Design">Engineering Design</option>
                            <option value="Essays on Technology">Essays on Technology</option>
                            <option value="Flight Endurance">Flight Endurance</option>
                            <option value="Photographic Technology">Photographic Technology</option>
                            <option value="Technology Bowl">Technology Bowl</option>
                            <option value="Webmaster">Webmaster</option>
                        </select>
                    </div> -->
                    <div class="info-item">
                        <label for="edit-due-date"><i class='bx bx-calendar'></i> Due Date:</label>
                        <input type="date" id="edit-due-date" class="task-input">
                    </div>
                    <div class="info-item">
                        <label for="edit-assigned-members"><i class='bx bx-user-plus'></i> Assigned
                            Members:</label>
                        <div class="member-dropdown-container" id="edit-assigned-members">
                            <div class="member-select-btn">
                                <span class="member-btn-text">Assign Members</span>
                                <span class="arrow-dwn">
                                    <i class='bx bx-chevron-down'></i>
                                </span>
                            </div>
                            <ul class="member-list-items">
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Robert Peters</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Emily Johnson</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Michael Smith</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Jessica Brown</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Daniel Williams</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="info-item">
                        <label for="edit-completion"><i class='bx bx-loader'></i> Completion Status:</label>
                        <select id="edit-completion" class="task-input">
                            <option value="incomplete">Incomplete</option>
                            <option value="progress">In Progress</option>
                            <option value="complete">Complete</option>
                        </select>
                    </div>

                    <div class="info-item">
                        <button class="task-btn" onclick="updateTask()">Update Task</button>
                        <div class="confirm-container">
                            <button class="delete-task-btn" onclick="toggleConfirm()"><i
                                    class='bx bx-trash'></i></button>
                            <span class="confirm">Are you sure?
                                <br>
                                <span class="confirm-btn-container">
                                    <button class="confirm-btn" id="confirm-delete-btn"
                                        onclick="confirmDelete('confirm')">Confirm</button>
                                    <button class="confirm-btn" id="cancel-delete-btn"
                                        onclick="confirmDelete('cancel')">Cancel</button>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Create Task Popup -->
    <div class="popup-overlay">
        <div class="popup">
            <span class="popup-close"><i class='bx bx-x'></i></span>
            <div class="profile-container">
                <div class="profile-header">
                    <h1><i class='bx bx-edit'></i>&nbsp;Create Task</h1>
                </div>
                <div class="profile-info">
                    <div class="info-item">
                        <label for="add-task-name"><i class='bx bx-task'></i> Task Name:</label>
                        <input type="text" id="add-task-name" class="task-input" placeholder="Enter Task Name">
                    </div>
                    <!-- <div class="info-item">
                        <label for="add-event"><i class='bx bx-calendar-event'></i> Event:</label>
                        <select id="add-event" class="task-input">
                            <option value="-Select-" disabled selected>-Select-</option>
                            <option value="CAD Engineering">CAD Engineering</option>
                            <option value="Chapter Team">Chapter Team</option>
                            <option value="Coding">Coding</option>
                            <option value="Dragster Design">Dragster Design</option>
                            <option value="Engineering Design">Engineering Design</option>
                            <option value="Essays on Technology">Essays on Technology</option>
                            <option value="Flight Endurance">Flight Endurance</option>
                            <option value="Photographic Technology">Photographic Technology</option>
                            <option value="Technology Bowl">Technology Bowl</option>
                            <option value="Webmaster">Webmaster</option>
                        </select>
                    </div> -->
                    <div class="info-item">
                        <label for="add-due-date"><i class='bx bx-calendar'></i> Due Date:</label>
                        <input type="date" id="add-due-date" class="task-input">
                    </div>
                    <div class="info-item">
                        <label for="add-assigned-members"><i class='bx bx-user-plus'></i> Assigned
                            Members:</label>
                        <div class="member-dropdown-container" id="add-assigned-members">
                            <div class="member-select-btn">
                                <span class="member-btn-text">Assign Members</span>
                                <span class="arrow-dwn">
                                    <i class='bx bx-chevron-down'></i>
                                </span>
                            </div>
                            <ul class="member-list-items">
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Robert Peters</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Emily Johnson</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Michael Smith</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Jessica Brown</span>
                                </li>
                                <li class="item">
                                    <span class="checkbox">
                                        <i class='bx bx-check check-icon'></i>
                                    </span>
                                    <span class="item-text">Daniel Williams</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="info-item">
                        <label for="add-completion"><i class='bx bx-loader'></i> Completion Status:</label>
                        <select id="add-completion" class="task-input">
                            <option value="-Select-" disabled selected>-Select-</option>
                            <option value="incomplete">Incomplete</option>
                            <option value="progress">In Progress</option>
                            <option value="complete">Complete</option>
                        </select>
                    </div>

                    <div class="info-item">
                        <button class="task-btn add-task-btn" onclick="createTask()">Add Task</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Calendar Popup -->
    <div class="popup-overlay">
        <div class="popup iframe-popup">
            <div class="iframe-popup-container">
                <span class="popup-close iframe-close"><i class='bx bx-x'></i></span>
                <iframe frameborder="0" src="https://calendar.online/86c0e897482639553ea8?iframe=true"
                    class="popup-frame"></iframe>
            </div>
        </div>
    </div>
    <!-- Chat Popup -->
    <div class="popup-overlay">
        <div class="popup iframe-popup">
            <div class="iframe-popup-container" id="chat-popup-frame">

            </div>
        </div>
    </div>


    <script src="https://cdn.deadsimplechat.com/sdk/1.2.1/dschatsdk.min.js"></script>
    <script>
        document.getElementById("chat").innerHTML = `
                    <iframe src="https://deadsimplechat.com/Io70zSoqh?uniqueUserIdentifier=${localStorage.getItem("username")}" id="chat-frame"></iframe>`;
        document.getElementById("chat-popup-frame").innerHTML = `
        
                <span class="popup-close iframe-close"><i class='bx bx-x'></i></span>            
        <iframe src="https://deadsimplechat.com/Io70zSoqh?uniqueUserIdentifier=${localStorage.getItem("username")}" id="chat-frame-popup" class="popup-frame"></iframe>`;
        (async () => {
            // DSChatSDK construction accepts two parameters:
            // 1. Chat Room Id
            // 2. ID of the iFrame tag
            // 3. Dead Simple Chat Public API Key.
            const sdk = new DSChatSDK("Io70zSoqh", "chat-frame", "pub_39475a6258343442534448644557574b7338674f536d5237566a4132746f4133795562515230325453354f754e4e4778")
            // Call the connect method to connect the SDK to the Chat iFrame.
            await sdk.connect();

        });
        (async () => {
            // DSChatSDK construction accepts two parameters:
            // 1. Chat Room Id
            // 2. ID of the iFrame tag
            // 3. Dead Simple Chat Public API Key.
            const sdk = new DSChatSDK("Io70zSoqh", "chat-frame-popup", "pub_39475a6258343442534448644557574b7338674f536d5237566a4132746f4133795562515230325453354f754e4e4778")
            // Call the connect method to connect the SDK to the Chat iFrame.
            await sdk.connect();

        });
    </script>
    <script>
        loadCompletion();
        loadEventMembers();
        loadTask();
        loadProfile();
        async function loadCompletion() {
            const event = localStorage.getItem("Event");
            const response = await fetch('https://software-23-24.onrender.com/eventCompletion', { //for deployment
                // const response = await fetch('http://localhost:3000/eventCompletion', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ event })
            });

            const result = await response.json();
            console.log(result.completion);
            document.querySelector("#event-name").innerHTML = "<i class='bx bx-log-out'></i>&nbsp;" + event;
            let progressEndValue = result.completion;
            let circularProgress = document.querySelector(".circular-progress"), progressValue = document.querySelector(".progress-value");
            let progressStartValue = 0, speed = 20;
            let completion = Number(progressValue.textContent.replace("%", ""));
            if (completion == 0) {
                let progress = setInterval(() => {
                    progressStartValue++;

                    progressValue.textContent = `${progressStartValue}%`;
                    circularProgress.style.background = `conic-gradient(#2a3de8 ${progressStartValue * 3.6}deg, #aaa 0deg)`;

                    if (progressStartValue >= progressEndValue) {
                        clearInterval(progress);
                    }
                }, speed);
            }
            else if (progressEndValue == completion) {
                return 0;
            }
            else if (progressEndValue < completion) {
                progressStartValue = completion;
                let progress = setInterval(() => {
                    progressStartValue--;

                    progressValue.textContent = `${progressStartValue}%`;
                    circularProgress.style.background = `conic-gradient(#2a3de8 ${progressStartValue * 3.6}deg, #aaa 0deg)`;

                    if (progressStartValue <= progressEndValue) {
                        clearInterval(progress);
                    }
                }, speed);
            }
            else if (progressEndValue > completion) {
                progressStartValue = completion;
                let progress = setInterval(() => {
                    progressStartValue++;

                    progressValue.textContent = `${progressStartValue}%`;
                    circularProgress.style.background = `conic-gradient(#2a3de8 ${progressStartValue * 3.6}deg, #aaa 0deg)`;

                    if (progressStartValue >= progressEndValue) {
                        clearInterval(progress);
                    }
                }, speed);
            }
        }

        async function loadProfile() {
            const user = localStorage.getItem("username");
            const response = await fetch('https://software-23-24.onrender.com/profileDetails', { //for deployment
                // const response = await fetch('http://localhost:3000/profileDetails', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ user })
            });

            const result = await response.json();
            let name = document.getElementById("name"),
                username = document.getElementById("username"),
                email = document.getElementById("email"),
                year = document.getElementById("year");
            let events = document.getElementsByClassName("event");
            let conferences = document.getElementsByClassName("thing");

            name.innerText = result.name;
            document.querySelector(".sBtn-text").innerText = result.name;
            username.innerText = result.username;
            email.innerText = result.email;
            year.innerText = result.year;
            for (let i = 0; i < result.events.length; i++) {
                events[i].innerText = result.events[i];
            }
            for (let i = 0; i < result.conferences.length; i++) {
                conferences[i].innerText = result.conferences[i];
            }
        }

        async function loadEventMembers() {
            const event = localStorage.getItem("Event");
            const response = await fetch('https://software-23-24.onrender.com/getEventMembers', { //for deployment
                // const response = await fetch('http://localhost:3000/getEventMembers', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ event })
            });
            let result = await response.json();
            const peopleList = result.members;
            console.log(peopleList);
            // console.log(peopleList);
            // console.log(peopleList[0]);
            // console.log(peopleList[0].sharedEvents[0]);
            let teammateTagNum = 0;
            for (let i = 0; i < peopleList.length; i++) {
                // document.getElementsByClassName("teammate-name")[i].innerText = String(peopleList[i].name) + " - " + String(peopleList[i].year);
                document.getElementsByClassName("teammate-name")[i].innerHTML = `${String(peopleList[i].name)} - ` + `<span class="teammate-year ${String(peopleList[i].year).toLowerCase()}">${String(peopleList[i].year)}</span>`;
                // for (let j = 0; j < peopleList[i].sharedEvents.length; j++) {
                //     document.getElementsByClassName("teammate-event")[j + teammateTagNum].innerText = String(peopleList[i].sharedEvents[j]);
                //     let eventName = peopleList[i].sharedEvents[j];
                //     eventName = eventName.toLowerCase();
                //     eventName = eventName.split(" ");
                //     eventName = eventName.join("-");
                //     document.getElementsByClassName("teammate-event")[j + teammateTagNum].className += " " + eventName;
                // }
                // teammateTagNum += 3;
                document.getElementsByClassName("member-email")[i].innerText = String(peopleList[i].email);

            }
            teammateTagNum = 0;
            for (let i = 0; i < 5; i++) {
                const memberNameElem = document.getElementsByClassName("teammate-name")[i];

                // Hide member if the name is unchanged
                if (memberNameElem.innerText.includes("Name")) {
                    memberNameElem.parentElement.style.display = "none";
                }

                // for (let j = 0; j < 3; j++) {
                //     const eventElem = document.getElementsByClassName("teammate-event")[j + teammateTagNum];

                //     // Hide event tag if it is unchanged
                //     if (eventElem.innerText.includes("Event")) {
                //         eventElem.style.display = "none";
                //     }
                // }
                // teammateTagNum += 3;
            }
        }

        async function loadTask() {
            const event = localStorage.getItem("Event");
            const response = await fetch('https://software-23-24.onrender.com/eventTask', { //for deployment
                // const response = await fetch('http://localhost:3000/eventTask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ event })
            });

            const result = await response.json(); //recieve events, incomplete, complete
            const events = result.tasks;
            console.log(events);
            let incompleteTasks = events[0],
                progressTasks = events[1],
                completeTasks = events[2];
            let taskNum = 0;
            showTaskCards(incompleteTasks.length, "incomplete");
            for (let i = 0; i < incompleteTasks.length; i++) {
                // let eventName = events[0][i];
                document.getElementsByClassName("task-name")[i + taskNum].innerHTML = incompleteTasks[i].task;
                if (incompleteTasks[i].due) {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = incompleteTasks[i].due;
                }
                else {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = "No Due Date";
                }
                let assigned = incompleteTasks[i].assigned,
                    assignedMembers = [];
                for (let k = 0; k < assigned.length; k++) {
                    let name = assigned[k];
                    name = name.split(" ");
                    name = name[0][0] + name[1][0];
                    assignedMembers.push(name);
                }
                document.getElementsByClassName("assigned")[i + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            }
            taskNum += incompleteTasks.length;
            showTaskCards(progressTasks.length, "progress");
            for (let i = 0; i < progressTasks.length; i++) {
                // let eventName = events[0][i];
                document.getElementsByClassName("task-name")[i + taskNum].innerHTML = progressTasks[i].task;
                if (progressTasks[i].due) {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = progressTasks[i].due;
                }
                else {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = "No Due Date";
                }
                let assigned = progressTasks[i].assigned,
                    assignedMembers = [];
                for (let k = 0; k < assigned.length; k++) {
                    let name = assigned[k];
                    name = name.split(" ");
                    name = name[0][0] + name[1][0];
                    assignedMembers.push(name);
                }
                document.getElementsByClassName("assigned")[i + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            }
            taskNum += progressTasks.length;
            showTaskCards(completeTasks.length, "complete");
            for (let i = 0; i < completeTasks.length; i++) {
                // let eventName = events[0][i];
                document.getElementsByClassName("task-name")[i + taskNum].innerHTML = completeTasks[i].task;
                if (completeTasks[i].due) {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = completeTasks[i].due;
                }
                else {
                    document.getElementsByClassName("due-date")[i + taskNum].innerHTML = "No Due Date";
                }
                let assigned = completeTasks[i].assigned,
                    assignedMembers = [];
                for (let k = 0; k < assigned.length; k++) {
                    let name = assigned[k];
                    name = name.split(" ");
                    name = name[0][0] + name[1][0];
                    assignedMembers.push(name);
                }
                document.getElementsByClassName("assigned")[i + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            }

            // for (let i = 0; i < incompleteTasks.length; i++) {
            //     showTaskCards(incompleteTasks.length, "incomplete");
            // }
            // for (let i = 0; i < incompleteTasks.length; i++) {
            //     for (let j = 0; j < incompleteTasks[i].length; j++) {
            //         let eventName = events[0][i];
            //         document.getElementsByClassName("task-name")[j + taskNum].innerHTML = incompleteTasks[i][j].task;
            //         if (incompleteTasks[i][j].due) {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = incompleteTasks[i][j].due;
            //         }
            //         else {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = "No Due Date";
            //         }
            //         let assigned = incompleteTasks[i][j].assigned,
            //             assignedMembers = [];
            //         for (let k = 0; k < assigned.length; k++) {
            //             let name = assigned[k];
            //             name = name.split(" ");
            //             name = name[0][0] + name[1][0];
            //             assignedMembers.push(name);
            //         }
            //         document.getElementsByClassName("assigned")[j + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            //         // document.getElementsByClassName("event-name")[j + taskNum].innerHTML = eventName;
            //         // eventName = eventName.toLowerCase();
            //         // eventName = eventName.split(" ");
            //         // eventName = eventName.join("-");
            //         // document.getElementsByClassName("event-name")[j + taskNum].className += " " + eventName;
            //     }
            //     taskNum += incompleteTasks[i].length;
            // }

            // let progressTasks = events[1];
            // for (let i = 0; i < progressTasks.length; i++) {
            //     showTaskCards(progressTasks[i].length, "progress");
            // }
            // for (let i = 0; i < progressTasks.length; i++) {
            //     for (let j = 0; j < progressTasks[i].length; j++) {
            //         let eventName = events[1][i];
            //         document.getElementsByClassName("task-name")[j + taskNum].innerHTML = progressTasks[i][j].task;
            //         if (progressTasks[i][j].due) {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = progressTasks[i][j].due;
            //         }
            //         else {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = "No Due Date";
            //         }
            //         let assigned = progressTasks[i][j].assigned,
            //             assignedMembers = [];
            //         for (let k = 0; k < assigned.length; k++) {
            //             let name = assigned[k];
            //             name = name.split(" ");
            //             name = name[0][0] + name[1][0];
            //             assignedMembers.push(name);
            //         }
            //         document.getElementsByClassName("assigned")[j + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            //         // document.getElementsByClassName("event-name")[j + taskNum].innerHTML = events[1][i];
            //         // eventName = eventName.toLowerCase();
            //         // eventName = eventName.split(" ");
            //         // eventName = eventName.join("-");
            //         // document.getElementsByClassName("event-name")[j + taskNum].className += " " + eventName;
            //     }
            //     taskNum += progressTasks[i].length;
            // }

            // let completeTasks = events[2];
            // for (let i = 0; i < completeTasks.length; i++) {
            //     showTaskCards(completeTasks[i].length, "complete");
            // }
            // for (let i = 0; i < completeTasks.length; i++) {
            //     for (let j = 0; j < completeTasks[i].length; j++) {
            //         let eventName = events[2][i];
            //         document.getElementsByClassName("task-name")[j + taskNum].innerHTML = completeTasks[i][j].task;
            //         if (completeTasks[i][j].due) {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = completeTasks[i][j].due;
            //         }
            //         else {
            //             document.getElementsByClassName("due-date")[j + taskNum].innerHTML = "No Due Date";
            //         }
            //         let assigned = completeTasks[i][j].assigned,
            //             assignedMembers = [];
            //         for (let k = 0; k < assigned.length; k++) {
            //             let name = assigned[k];
            //             name = name.split(" ");
            //             name = name[0][0] + name[1][0];
            //             assignedMembers.push(name);
            //         }
            //         document.getElementsByClassName("assigned")[j + taskNum].innerHTML = `Assigned: ${assignedMembers.join(", ")}`;
            //         // document.getElementsByClassName("event-name")[j + taskNum].innerHTML = events[2][i];
            //         // eventName = eventName.toLowerCase();
            //         // eventName = eventName.split(" ");
            //         // eventName = eventName.join("-");
            //         // document.getElementsByClassName("event-name")[j + taskNum].className += " " + eventName;
            //     }
            //     taskNum += completeTasks[i].length;
            // }

            const taskCards = document.querySelectorAll(".task-card");
            console.log(taskCards);
            taskCards.forEach(card => {
                card.addEventListener('click', (event) => {
                    togglePopup(1);
                    let column = null;
                    if (event.target.matches(".task-card")) {
                        column = event.target.parentElement;
                    }
                    else {
                        column = event.target.parentElement.parentElement;
                    }
                    // const column = event.target.parentElement.parentElement;
                    const card = Array.from(column.children).indexOf(event.target.parentElement);
                    const columnClass = column.classList;

                    if (columnClass.contains("incomplete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "incomplete", card: card }));
                    } else if (columnClass.contains("progress")) {
                        localStorage.setItem("task", JSON.stringify({ column: "progress", card: card }));
                    } else if (columnClass.contains("complete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "complete", card: card }));
                    }
                    loadRequestedTask();
                });
            });

        }

        function createTaskCards() {
            const taskCard = document.createElement('div');
            taskCard.className = 'task-card';

            const taskName = document.createElement('p');
            taskName.className = 'task-name';
            taskCard.appendChild(taskName);

            const dueDate = document.createElement('p');
            // dueDate.innerText = 'Due Date: 2024-07-01';
            dueDate.innerText = 'Due Date: 6/14/2024';
            dueDate.className += "due-date";
            taskCard.appendChild(dueDate);

            const assigned = document.createElement('p');
            assigned.innerText = 'Assigned: ';
            assigned.className = 'assigned';
            taskCard.appendChild(assigned);

            // const eventName = document.createElement('p');
            // eventName.innerText = 'Event Name';
            // eventName.className = " event-name";
            // taskCard.appendChild(eventName);

            const assignedMembers = document.createElement('span');
            assignedMembers.className = 'assigned-members';
            taskCard.appendChild(assignedMembers);

            return taskCard;
        }

        function showTaskCards(cardNum, column) {
            for (let i = 0; i < cardNum; i++) {
                const taskCard = createTaskCards();
                const container = document.querySelector("." + column);
                const addCard = container.querySelector(".add-card");
                container.insertBefore(taskCard, addCard);
            }
        }

        async function updateTask() {
            //get requested task to find card to delete
            const requestedTask = JSON.parse(localStorage.getItem("task"));
            const column = document.querySelector(`.${requestedTask.column}`);
            const taskCard = column.children[requestedTask.card];
            let originalTaskName = taskCard.querySelector(".task-name").innerText;
            //get values from inputs
            let editTaskName = document.getElementById("edit-task-name"),
                editTaskEvent = localStorage.getItem("Event"),
                editTaskDueDate = document.getElementById("edit-due-date"),
                editAssignedMembers = document.getElementById("edit-assigned-members"),
                editCompletion = document.getElementById("edit-completion");


            //format for writing to database
            taskName = editTaskName.value;
            taskEvent = editTaskEvent;
            // taskEvent = taskEvent.split(" ").join("-");
            taskDueDate = new Date(editTaskDueDate.value);
            let formattedDate = `${taskDueDate.getMonth() + 1}/${taskDueDate.getDate() + 1}/${taskDueDate.getFullYear()}`;
            // formattedDate = "Due Date: " + formattedDate;
            taskCompletion = editCompletion.value.charAt(0).toUpperCase() + editCompletion.value.slice(1);
            editAssignedMembers = editAssignedMembers.children[1].children;
            console.log(editAssignedMembers);
            console.log(editAssignedMembers[0].children);
            assignedMembers = [];
            for (let i = 0; i < editAssignedMembers.length; i++) {
                if (editAssignedMembers[i].className.includes("checked")) {
                    assignedMembers.push(editAssignedMembers[i].children[1].innerText);
                } else {
                    continue;
                }
            }
            if (assignedMembers.length == 0) {
                assignedMembers = [];
            }

            const task = {
                task: taskName,
                event: taskEvent,
                dueDate: formattedDate,
                assignedMembers: assignedMembers,
                completion: taskCompletion,
                originalTask: originalTaskName
            }
            console.log(task.completion);

            //send request to server
            const response = await fetch('https://software-23-24.onrender.com/updateTask', { //for deployment
                // const response = await fetch('http://localhost:3000/updateTask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ task })
            });

            let result = await response.json();
            result = result.newTask;
            // showTaskCards(1, result.status.toLowerCase());
            function createNewTask(result) {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';

                const taskName = document.createElement('p');
                taskName.innerText = result.task;
                taskName.className = 'task-name';
                taskCard.appendChild(taskName);

                const dueDate = document.createElement('p');
                dueDate.innerText = `Due Date: ${result.due}`;
                dueDate.className += "due-date";
                taskCard.appendChild(dueDate);

                let members = [],
                    initials = [];
                for (let i = 0; i < result.assigned.length; i++) {
                    let name = result.assigned[i];
                    name = name.split(" ");
                    name = name[0][0] + name[1][0];
                    initials.push(name);
                }
                const assigned = document.createElement('p');
                assigned.innerText = `Assigned: ${initials.join(", ")}`;
                assigned.className += "assigned";
                taskCard.appendChild(assigned);

                // const eventName = document.createElement('p');
                // eventName.innerText = task.event;
                // eventName.className = " event-name";
                // eventNameTxt = task.event.toLowerCase();
                // eventNameTxt = eventNameTxt.split(" ");
                // eventNameTxt = eventNameTxt.join("-");
                // eventName.className += " " + eventNameTxt;
                // taskCard.appendChild(eventName);

                const assignedMembers = document.createElement('span');
                assignedMembers.className = 'assigned-members';
                taskCard.appendChild(assignedMembers);

                return taskCard;
            }
            function showNewTask(cardNum, column) {
                const taskCard = createNewTask(result);
                const container = document.querySelector("." + column);
                console.log(container);
                const addCard = container.querySelector(".add-card");
                console.log(addCard);
                container.insertBefore(taskCard, addCard);
                togglePopup(1);
                taskCard.addEventListener("click", () => {
                    togglePopup(1);
                    let column = null;
                    if (event.target.matches(".task-card")) {
                        column = event.target.parentElement;
                    }
                    else {
                        column = event.target.parentElement.parentElement;
                    }
                    // const column = event.target.parentElement.parentElement;
                    const card = Array.from(column.children).indexOf(event.target.parentElement);
                    const columnClass = column.classList;

                    if (columnClass.contains("incomplete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "incomplete", card: card }));
                    } else if (columnClass.contains("progress")) {
                        localStorage.setItem("task", JSON.stringify({ column: "progress", card: card }));
                    } else if (columnClass.contains("complete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "complete", card: card }));
                    }
                    loadRequestedTask();
                });
            }
            showNewTask(1, String(result.status).toLowerCase());
            console.log(result.status);
            taskCard.remove();
            loadCompletion();
        }

        async function createTask() {
            //get inputted info
            //send request to server
            //write new task to database with id based on # of task in collection
            //return new task info
            //display new task

            //get requested task to find card to delete
            // const requestedTask = JSON.parse(localStorage.getItem("task"));
            // const column = document.querySelector(`.${requestedTask.column}`);
            // const taskCard = column.children[requestedTask.card];
            // let originalTaskName = taskCard.querySelector(".task-name").innerText;
            //get values from inputs
            let addTaskName = document.getElementById("add-task-name"),
                addTaskEvent = localStorage.getItem("Event"),
                addTaskDueDate = document.getElementById("add-due-date"),
                addAssignedMembers = document.getElementById("add-assigned-members"),
                addCompletion = document.getElementById("add-completion");


            //format for writing to database
            taskName = addTaskName.value;
            taskEvent = addTaskEvent;
            // taskEvent = taskEvent.split(" ").join("-");
            taskDueDate = new Date(addTaskDueDate.value);
            let formattedDate = `${taskDueDate.getMonth() + 1}/${taskDueDate.getDate() + 1}/${taskDueDate.getFullYear()}`;
            // formattedDate = "Due Date: " + formattedDate;
            taskCompletion = addCompletion.value.charAt(0).toUpperCase() + addCompletion.value.slice(1);
            addAssignedMembers = addAssignedMembers.children[1].children;
            console.log(addAssignedMembers);
            console.log(addAssignedMembers[0].children);
            assignedMembers = [];
            for (let i = 0; i < addAssignedMembers.length; i++) {
                if (addAssignedMembers[i].className.includes("checked")) {
                    assignedMembers.push(addAssignedMembers[i].children[1].innerText);
                } else {
                    continue;
                }
            }
            if (assignedMembers.length == 0) {
                assignedMembers = [];
            }

            const task = {
                task: taskName,
                event: taskEvent,
                dueDate: formattedDate,
                assignedMembers: assignedMembers,
                completion: taskCompletion
            }
            console.log(task);

            //send request to server
            const response = await fetch('https://software-23-24.onrender.com/createTask', { //for deployment
                // const response = await fetch('http://localhost:3000/createTask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ task })
            });

            let result = await response.json();
            result = result.newTask;
            function createNewTask(result) {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';

                const taskName = document.createElement('p');
                taskName.innerText = result.task;
                taskName.className = 'task-name';
                taskCard.appendChild(taskName);

                const dueDate = document.createElement('p');
                dueDate.innerText = `Due Date: ${result.due}`;
                dueDate.className += "due-date";
                taskCard.appendChild(dueDate);

                let members = [],
                    initials = [];
                for (let i = 0; i < result.assigned.length; i++) {
                    let name = result.assigned[i];
                    name = name.split(" ");
                    name = name[0][0] + name[1][0];
                    initials.push(name);
                }
                const assigned = document.createElement('p');
                assigned.innerText = `Assigned: ${initials.join(", ")}`;
                assigned.className += "assigned";
                taskCard.appendChild(assigned);

                // const eventName = document.createElement('p');
                // eventName.innerText = task.event;
                // eventName.className = " event-name";
                // eventNameTxt = task.event.toLowerCase();
                // eventNameTxt = eventNameTxt.split(" ");
                // eventNameTxt = eventNameTxt.join("-");
                // eventName.className += " " + eventNameTxt;
                // taskCard.appendChild(eventName);

                const assignedMembers = document.createElement('span');
                assignedMembers.className = 'assigned-members';
                taskCard.appendChild(assignedMembers);

                return taskCard;
            }
            function showNewTask(cardNum, column) {
                const taskCard = createNewTask(result);
                const container = document.querySelector("." + column);
                console.log(container);
                const addCard = container.querySelector(".add-card");
                console.log(addCard);
                container.insertBefore(taskCard, addCard);
                togglePopup(2);
                taskCard.addEventListener("click", () => {
                    togglePopup(1);
                    let column = null;
                    if (event.target.matches(".task-card")) {
                        column = event.target.parentElement;
                    }
                    else {
                        column = event.target.parentElement.parentElement;
                    }
                    // const column = event.target.parentElement.parentElement;
                    const card = Array.from(column.children).indexOf(event.target.parentElement);
                    const columnClass = column.classList;

                    if (columnClass.contains("incomplete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "incomplete", card: card }));
                    } else if (columnClass.contains("progress")) {
                        localStorage.setItem("task", JSON.stringify({ column: "progress", card: card }));
                    } else if (columnClass.contains("complete")) {
                        localStorage.setItem("task", JSON.stringify({ column: "complete", card: card }));
                    }
                    loadRequestedTask();
                });
            }
            showNewTask(1, String(result.status).toLowerCase());
            loadCompletion();
        }

        async function deleteTask() {
            const requestedTask = JSON.parse(localStorage.getItem("task"));
            const column = document.querySelector(`.${requestedTask.column}`);
            const taskCard = column.children[requestedTask.card];
            const taskName = taskCard.querySelector(".task-name").innerText,
                taskEvent = localStorage.getItem("Event");
            const task = { name: taskName, event: taskEvent };

            console.log(task);
            console.log(taskCard);
            const response = await fetch('https://software-23-24.onrender.com/deleteTask', { //for deployment
                // const response = await fetch('http://localhost:3000/deleteTask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ task })
            });

            const result = await response.json();
            togglePopup(1);
            taskCard.remove();
            loadCompletion();
        }

        async function confirmDelete(res) {
            if (res == "confirm") {
                deleteTask();
            }
            else {
                toggleConfirm();
            }
        }

        function toggleConfirm() {
            const confirm = document.querySelector(".confirm");
            confirm.classList.toggle("show");
        }
    </script>
    <script>
        const optionMenu = document.querySelector(".select-menu"),
            selectBtn = optionMenu.querySelector(".select-btn"),
            options = optionMenu.querySelectorAll(".option"),
            sBtn_text = optionMenu.querySelector(".sBtn-text");

        selectBtn.addEventListener("click", () => optionMenu.classList.toggle("active"));

        options.forEach(option => {
            option.addEventListener("click", () => {
                let selectedOption = option.querySelector(".option-text").innerText;
                sBtn_text.innerText = selectedOption;
                optionMenu.classList.remove("active");
                navigateMenu(selectedOption);
            });
        });

        function navigateMenu(value) {
            switch (value) {
                case "Profile":
                    togglePopup(0);
                    break;
                case "Logout":
                    localStorage.removeItem("username");
                    window.location.href = "index.html";
                    break;
                default:
                    break;
            }
        }

        const popups = document.querySelectorAll(".popup-overlay");
        const popupCloseBtns = document.querySelectorAll(".popup-close");
        function togglePopupEvent() {
            const popupOverlay = document.querySelector('.popup-active');
            popupOverlay.classList.toggle('popup-active');
        }
        function togglePopup(index) {
            const popupOverlay = document.querySelectorAll('.popup-overlay')[index];
            popupOverlay.classList.toggle('popup-active');
            items = popupOverlay.querySelectorAll(".item");
            items.forEach(item => {
                item.classList.remove("checked");
            })
        }

        // document.querySelector('.popup-close').addEventListener('click', togglePopupEvent);
        popupCloseBtns.forEach(btns => {
            btns.addEventListener('click', () => {
                togglePopupEvent();
                localStorage.removeItem("task");
            });
        });
        const addTasks = document.querySelectorAll(".add-card");
        addTasks.forEach(add => {
            add.addEventListener('click', (event) => {
                togglePopup(2);
            });
        });

        function loadRequestedTask() {
            const requestedTask = JSON.parse(localStorage.getItem("task"));
            console.log(requestedTask);

            const column = document.querySelector(`.${requestedTask.column}`);
            const taskCard = column.children[requestedTask.card];
            console.log(column);

            let taskName = taskCard.querySelector(".task-name").innerText,
                taskDueDate = taskCard.querySelector(".due-date").innerText.replace("Due Date: ", ""),
                taskCompletion = null;
            function formatDate(inputDate) {
                const [month, day, year] = inputDate.split('/');
                const formattedDate = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
                return formattedDate;
            }

            const formattedDate = formatDate(taskDueDate);
            console.log(formattedDate); // Output: 2024-06-14

            if (column.className.includes("incomplete")) {
                taskCompletion = "incomplete";
            }
            else if (column.className.includes("progress")) {
                taskCompletion = "progress";
            }
            else if (column.className.includes("complete")) {
                taskCompletion = "complete";
            }

            const popup = document.querySelectorAll(".popup-overlay")[2];

            let editTaskName = document.getElementById("edit-task-name"),
                editTaskEvent = document.getElementById("edit-event"),
                editTaskDueDate = document.getElementById("edit-due-date"),
                editAssignedMembers = document.getElementById("edit-assigned-members"),
                editCompletion = document.getElementById("edit-completion");
            console.log(taskDueDate);
            editTaskName.value = taskName;
            editTaskDueDate.value = formattedDate;
            // editTaskEvent.value = taskEvent;
            editCompletion.value = taskCompletion;
            const memberDropdown = document.getElementById("edit-assigned-members");
            let assignedMembers = taskCard.querySelector(".assigned").innerText;
            assignedMembers = assignedMembers.replace("Assigned: ", "");
            assignedMembers = assignedMembers.split(", ");
            console.log(assignedMembers);
            const memberList = memberDropdown.querySelectorAll(".item-text");
            const items = memberDropdown.querySelectorAll(".item");
            for (let i = 0; i < memberList.length; i++) {
                let member = memberList[i].innerText;
                member = member.split(" ");
                member = member[0][0] + member[1][0];
                console.log(member);
                for (let j = 0; j < assignedMembers.length; j++) {
                    if (member == assignedMembers[j]) {
                        items[i].classList.toggle("checked");
                    }
                }
                // if (member == assignedMembers[i]) {
                //     items[i].classList.toggle("checked");
                // }
            }
            let checked = memberDropdown.querySelectorAll(".checked"),
                btnText = memberDropdown.querySelector(".member-btn-text");
            if (checked && checked.length > 0 && checked.length < 2) {
                btnText.innerText = `${checked.length} Member Assigned`;
            }
            else if (checked && checked.length > 1) {
                btnText.innerText = `${checked.length} Members Assigned`;
            }
            else {
                btnText.innerText = "Assign Members";
            }

        }

        // Edit task multi dropdown menu
        window.addEventListener("DOMContentLoaded", () => {
            const selectBtns = document.getElementsByClassName("member-select-btn");
            for (let i = 0; i < selectBtns.length; i++) {
                const selectBtn = document.getElementsByClassName("member-select-btn")[i];
                const container = document.getElementsByClassName("member-dropdown-container")[i];
                const items = container.querySelectorAll(".item");
                selectBtn.addEventListener("click", () => {
                    selectBtn.classList.toggle("open");
                });

                items.forEach(item => {
                    item.addEventListener("click", () => {
                        item.classList.toggle("checked");

                        let checked = container.querySelectorAll(".checked"),
                            btnText = container.querySelector(".member-btn-text");
                        if (checked && checked.length > 0 && checked.length < 2) {
                            btnText.innerText = `${checked.length} Member Assigned`;
                        }
                        else if (checked && checked.length > 1) {
                            btnText.innerText = `${checked.length} Members Assigned`;
                        }
                        else {
                            btnText.innerText = "Assign Members";
                        }
                    });
                });
            }
        });

        document.getElementById("event-name").addEventListener("click", () => {
            window.location.href = "general-dash.html";
        });
    </script>
</body>

</html>